import{j as e,u as te,y as ye,c as Ne,P as W,d as we,E as be}from"./ui-B52-YLhK.js";import{r as c}from"./vendor-BcRnq7Bv.js";import{c as I,C as w,b,d as S,f as k,e as C,B as M,t as p,I as D,x as Y,E as $,y as re,z as ie,D as ne,s as J,r as T,F as Se,a as G,G as Z,q as ce,S as le,g as K,M as oe,i as E,j as U,k as R,l as L,m as v,H as Ce,u as de,J as ke,h as O,p as Q,A as Pe,n as _e,o as Me,K as Te}from"./index-CwOpWW1C.js";import{S as me,F as Fe,I as Ae,a as De}from"./image-upload-CCixpRm1.js";import{T as Ie,a as Ee,b as q,c as z}from"./tabs-D5GWy4pF.js";import{C as Ue}from"./circle-check-big-JwFVQrd3.js";import{R as Re}from"./refresh-cw-Cbz7bPSV.js";import{C as Le}from"./clock-NqfEd9ie.js";import{a as Oe,f as V}from"./utils-BT0ItAA-.js";import{P as qe}from"./phone-C23XvDq8.js";import{M as ze}from"./map-pin-OatoSQae.js";import{B as Be}from"./building-CFEQ3fjO.js";import"./supabase-B83k6j1z.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=I("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=I("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=I("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=I("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=I("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=I("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function $e(){const[a,t]=c.useState(""),[i,h]=c.useState(""),[m,l]=c.useState(""),[u,o]=c.useState(!1),[f,s]=c.useState(""),[j,x]=c.useState(!1),[r,d]=c.useState(!1),[y,F]=c.useState(!1),[_,n]=c.useState(!1),g=async N=>{if(N.preventDefault(),o(!0),s(""),x(!1),i.length<6){s("New password must be at least 6 characters long"),o(!1);return}if(i!==m){s("New passwords do not match"),o(!1);return}try{const{error:A}=await J.auth.updateUser({password:i});if(A)throw A;x(!0),t(""),h(""),l(""),T.success("Password updated successfully!")}catch(A){console.error("Password change error:",A),s(A.message||"Failed to update password")}finally{o(!1)}};return j?e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-600"}),e.jsx(S,{className:"text-green-700",children:"Password Updated"})]}),e.jsx(k,{children:"Your password has been successfully updated. You can continue using the application with your new password."})]}),e.jsx(C,{children:e.jsx(M,{onClick:()=>x(!1),variant:"outline",className:"bg-gray-100 text-gray-600 border-gray-300 hover:bg-gray-200 hover:text-gray-700",children:"Change Password Again"})})]}):e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs(S,{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-5 w-5"}),e.jsx("span",{children:"Change Password"})]}),e.jsx(k,{children:"Update your account password for better security"})]}),e.jsxs(C,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"currentPassword",type:r?"text":"password",placeholder:"Enter your current password",value:a,onChange:N=>t(N.target.value),required:!0}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 hover:text-gray-700",onClick:()=>d(!r),children:r?e.jsx(Y,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"newPassword",type:y?"text":"password",placeholder:"Enter your new password (min 6 characters)",value:i,onChange:N=>h(N.target.value),required:!0,minLength:6}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 hover:text-gray-700",onClick:()=>F(!y),children:y?e.jsx(Y,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"confirmPassword",type:_?"text":"password",placeholder:"Confirm your new password",value:m,onChange:N=>l(N.target.value),required:!0,minLength:6}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 hover:text-gray-700",onClick:()=>n(!_),children:_?e.jsx(Y,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]}),f&&e.jsx(re,{variant:"destructive",children:e.jsx(ie,{children:f})}),e.jsx(M,{type:"submit",className:"w-full bg-gray-600 hover:bg-gray-700 text-white",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Update Password"})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Password Requirements:"}),e.jsx("br",{}),"• Minimum 6 characters",e.jsx("br",{}),"• Use a strong, unique password",e.jsx("br",{}),"• Don't reuse passwords from other accounts"]})})]})]})}var H="Switch",[Je,js]=Ne(H),[Ge,We]=Je(H),he=c.forwardRef((a,t)=>{const{__scopeSwitch:i,name:h,checked:m,defaultChecked:l,required:u,disabled:o,value:f="on",onCheckedChange:s,form:j,...x}=a,[r,d]=c.useState(null),y=te(t,N=>d(N)),F=c.useRef(!1),_=r?j||!!r.closest("form"):!0,[n,g]=ye({prop:m,defaultProp:l??!1,onChange:s,caller:H});return e.jsxs(Ge,{scope:i,checked:n,disabled:o,children:[e.jsx(W.button,{type:"button",role:"switch","aria-checked":n,"aria-required":u,"data-state":je(n),"data-disabled":o?"":void 0,disabled:o,value:f,...x,ref:y,onClick:we(a.onClick,N=>{g(A=>!A),_&&(F.current=N.isPropagationStopped(),F.current||N.stopPropagation())})}),_&&e.jsx(pe,{control:r,bubbles:!F.current,name:h,value:f,checked:n,required:u,disabled:o,form:j,style:{transform:"translateX(-100%)"}})]})});he.displayName=H;var xe="SwitchThumb",ue=c.forwardRef((a,t)=>{const{__scopeSwitch:i,...h}=a,m=We(xe,i);return e.jsx(W.span,{"data-state":je(m.checked),"data-disabled":m.disabled?"":void 0,...h,ref:t})});ue.displayName=xe;var Ke="SwitchBubbleInput",pe=c.forwardRef(({__scopeSwitch:a,control:t,checked:i,bubbles:h=!0,...m},l)=>{const u=c.useRef(null),o=te(u,l),f=Se(i),s=be(t);return c.useEffect(()=>{const j=u.current;if(!j)return;const x=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(x,"checked").set;if(f!==i&&d){const y=new Event("click",{bubbles:h});d.call(j,i),j.dispatchEvent(y)}},[f,i,h]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...m,tabIndex:-1,ref:o,style:{...m.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pe.displayName=Ke;function je(a){return a?"checked":"unchecked"}var fe=he,Xe=ue;const P=c.forwardRef(({className:a,...t},i)=>e.jsx(fe,{className:G("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:i,children:e.jsx(Xe,{className:G("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));P.displayName=fe.displayName;var Ze="Separator",ae="horizontal",Qe=["horizontal","vertical"],ge=c.forwardRef((a,t)=>{const{decorative:i,orientation:h=ae,...m}=a,l=es(h)?h:ae,o=i?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(W.div,{"data-orientation":l,...o,...m,ref:t})});ge.displayName=Ze;function es(a){return Qe.includes(a)}var ve=ge;const X=c.forwardRef(({className:a,orientation:t="horizontal",decorative:i=!0,...h},m)=>e.jsx(ve,{ref:m,decorative:i,orientation:t,className:G("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...h}));X.displayName=ve.displayName;function ss({onSave:a}){const[t,i]=c.useState({notifications:{email:!0,push:!0,tasks:!0,leaves:!0,announcements:!0,deadlines:!0},appearance:{theme:"light",language:"en",timezone:"UTC"},privacy:{profileVisibility:"team",showOnlineStatus:!0,allowDirectMessages:!0}}),[h,m]=c.useState(!1),l=(s,j)=>{i(x=>({...x,notifications:{...x.notifications,[s]:j}}))},u=(s,j)=>{i(x=>({...x,appearance:{...x.appearance,[s]:j}}))},o=(s,j)=>{i(x=>({...x,privacy:{...x.privacy,[s]:j}}))},f=async()=>{m(!0);try{T.success("Preferences saved successfully!"),a?.(t)}catch{T.error("Failed to save preferences")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Notification Preferences"]}),e.jsx(k,{children:"Choose how you want to be notified about important updates"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Notification Channels"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{htmlFor:"email-notifications",children:"Email Notifications"})]}),e.jsx(P,{id:"email-notifications",checked:t.notifications.email,onCheckedChange:s=>l("email",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{htmlFor:"push-notifications",children:"Push Notifications"})]}),e.jsx(P,{id:"push-notifications",checked:t.notifications.push,onCheckedChange:s=>l("push",s)})]})]})]}),e.jsx(X,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Notification Types"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(le,{className:"h-4 w-4 text-blue-500"}),e.jsx(p,{htmlFor:"task-notifications",children:"Task Updates"})]}),e.jsx(P,{id:"task-notifications",checked:t.notifications.tasks,onCheckedChange:s=>l("tasks",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),e.jsx(p,{htmlFor:"leave-notifications",children:"Leave Requests"})]}),e.jsx(P,{id:"leave-notifications",checked:t.notifications.leaves,onCheckedChange:s=>l("leaves",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{className:"h-4 w-4 text-purple-500"}),e.jsx(p,{htmlFor:"announcement-notifications",children:"Announcements"})]}),e.jsx(P,{id:"announcement-notifications",checked:t.notifications.announcements,onCheckedChange:s=>l("announcements",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{className:"h-4 w-4 text-red-500"}),e.jsx(p,{htmlFor:"deadline-notifications",children:"Deadline Reminders"})]}),e.jsx(P,{id:"deadline-notifications",checked:t.notifications.deadlines,onCheckedChange:s=>l("deadlines",s)})]})]})]})]})]}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Appearance & Language"]}),e.jsx(k,{children:"Customize how the application looks and feels"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"theme",children:"Theme"}),e.jsxs(E,{value:t.appearance.theme,onValueChange:s=>u("theme",s),children:[e.jsx(U,{children:e.jsx(R,{})}),e.jsxs(L,{children:[e.jsx(v,{value:"light",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:"Light"})]})}),e.jsx(v,{value:"dark",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Dark"})]})}),e.jsx(v,{value:"system",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"System"})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"language",children:"Language"}),e.jsxs(E,{value:t.appearance.language,onValueChange:s=>u("language",s),children:[e.jsx(U,{children:e.jsx(R,{})}),e.jsxs(L,{children:[e.jsx(v,{value:"en",children:"English"}),e.jsx(v,{value:"es",children:"Español"}),e.jsx(v,{value:"fr",children:"Français"}),e.jsx(v,{value:"de",children:"Deutsch"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(E,{value:t.appearance.timezone,onValueChange:s=>u("timezone",s),children:[e.jsx(U,{children:e.jsx(R,{})}),e.jsxs(L,{children:[e.jsx(v,{value:"UTC",children:"UTC (Coordinated Universal Time)"}),e.jsx(v,{value:"EST",children:"EST (Eastern Standard Time)"}),e.jsx(v,{value:"PST",children:"PST (Pacific Standard Time)"}),e.jsx(v,{value:"GMT",children:"GMT (Greenwich Mean Time)"})]})]})]})]})]}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Privacy & Security"]}),e.jsx(k,{children:"Control your privacy settings and data visibility"})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:"profile-visibility",children:"Profile Visibility"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Who can see your profile information"})]}),e.jsxs(E,{value:t.privacy.profileVisibility,onValueChange:s=>o("profileVisibility",s),children:[e.jsx(U,{className:"w-32",children:e.jsx(R,{})}),e.jsxs(L,{children:[e.jsx(v,{value:"public",children:"Public"}),e.jsx(v,{value:"team",children:"Team Only"}),e.jsx(v,{value:"private",children:"Private"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:"online-status",children:"Show Online Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're online"})]}),e.jsx(P,{id:"online-status",checked:t.privacy.showOnlineStatus,onCheckedChange:s=>o("showOnlineStatus",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:"direct-messages",children:"Allow Direct Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow team members to message you directly"})]}),e.jsx(P,{id:"direct-messages",checked:t.privacy.allowDirectMessages,onCheckedChange:s=>o("allowDirectMessages",s)})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{onClick:f,disabled:h,className:"min-w-32",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})})})]})}function as(){const{profile:a}=de(),[t,i]=c.useState([]),[h,m]=c.useState(!0),[l,u]=c.useState(!1);c.useEffect(()=>{a&&o()},[a]);const o=async(r=!1)=>{if(a){r?u(!0):m(!0);try{const d=[{id:"1",type:"task_completed",title:"Completed Task",description:"Finished the quarterly report analysis",timestamp:new Date().toISOString(),metadata:{status:"completed",priority:"high"}},{id:"2",type:"leave_requested",title:"Leave Request Submitted",description:"Requested vacation leave for next week",timestamp:new Date(Date.now()-36e5).toISOString(),metadata:{status:"pending",category:"vacation"}},{id:"3",type:"task_created",title:"New Task Assigned",description:"Review and update project documentation",timestamp:new Date(Date.now()-72e5).toISOString(),metadata:{status:"pending",priority:"medium"}},{id:"4",type:"announcement_viewed",title:"Viewed Announcement",description:"Read company policy updates",timestamp:new Date(Date.now()-864e5).toISOString(),metadata:{category:"policy"}},{id:"5",type:"profile_updated",title:"Profile Updated",description:"Updated contact information and job title",timestamp:new Date(Date.now()-1728e5).toISOString()},{id:"6",type:"leave_approved",title:"Leave Request Approved",description:"Sick leave request was approved by manager",timestamp:new Date(Date.now()-2592e5).toISOString(),metadata:{status:"approved",category:"sick"}}];i(d)}catch(d){console.error("Error fetching activities:",d)}finally{m(!1),u(!1)}}},f=r=>{switch(r){case"task_created":case"task_completed":return e.jsx(le,{className:"h-4 w-4"});case"leave_requested":case"leave_approved":return e.jsx(K,{className:"h-4 w-4"});case"announcement_viewed":return e.jsx(oe,{className:"h-4 w-4"});case"profile_updated":return e.jsx(Fe,{className:"h-4 w-4"});default:return e.jsx(B,{className:"h-4 w-4"})}},s=r=>{switch(r){case"task_created":return"bg-blue-100 text-blue-600 border-blue-200";case"task_completed":return"bg-green-100 text-green-600 border-green-200";case"leave_requested":return"bg-yellow-100 text-yellow-600 border-yellow-200";case"leave_approved":return"bg-green-100 text-green-600 border-green-200";case"announcement_viewed":return"bg-purple-100 text-purple-600 border-purple-200";case"profile_updated":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}},j=r=>{if(!r.metadata?.status)return null;const d=r.metadata.status;let y="secondary";return(d==="completed"||d==="approved")&&(y="default"),d==="pending"&&(y="outline"),d==="rejected"&&(y="destructive"),e.jsx(O,{variant:y,className:"text-xs",children:d})},x=r=>{if(!r)return null;const d={high:"bg-red-100 text-red-600 border-red-200",medium:"bg-yellow-100 text-yellow-600 border-yellow-200",low:"bg-green-100 text-green-600 border-green-200"};return e.jsx(O,{variant:"outline",className:`text-xs ${d[r]||d.medium}`,children:r})};return h?e.jsxs(w,{children:[e.jsx(b,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Activity Feed"]})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((r,d)=>e.jsxs("div",{className:"flex items-start space-x-3 animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},d))})})]}):e.jsxs(w,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Activity Feed"]}),e.jsx(k,{children:"Your recent activities and updates"})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>o(!0),disabled:l,className:"h-8",children:e.jsx(Re,{className:`h-4 w-4 ${l?"animate-spin":""}`})})]})}),e.jsxs(C,{children:[e.jsx(ke,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:t.map((r,d)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg border ${s(r.type)}`,children:f(r.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:r.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(r),x(r.metadata?.priority)]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(Le,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Oe(new Date(r.timestamp),{addSuffix:!0})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:V(new Date(r.timestamp),"MMM dd, h:mm a")})]})]})]}),d<t.length-1&&e.jsx(X,{className:"mt-4"})]},r.id))})}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(B,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent activity"})]})]})]})}function fs(){const{profile:a,user:t,refreshProfile:i}=de(),[h,m]=c.useState(!1),[l,u]=c.useState(a?.profile_picture||""),[o,f]=c.useState(!1),[s,j]=c.useState({full_name:a?.full_name||"",phone:a?.phone||"",job_title:a?.job_title||"",location:a?.location||""}),x=async n=>{if(n.preventDefault(),!!a){m(!0);try{const{error:g}=await J.from("profiles").update({full_name:s.full_name,phone:s.phone||null,job_title:s.job_title,location:s.location,profile_picture:l||null,updated_at:new Date().toISOString()}).eq("id",a.id);if(g)throw g;T.success("Profile updated successfully!"),f(!1),await i()}catch(g){console.error("Error updating profile:",g),T.error("Failed to update profile")}finally{m(!1)}}},r=(n,g)=>{j(N=>({...N,[n]:g})),f(!0)},d=async n=>{if(u(n),a)try{const{error:g}=await J.from("profiles").update({profile_picture:n,updated_at:new Date().toISOString()}).eq("id",a.id);if(g)throw g;T.success("Profile picture updated successfully!"),await i()}catch(g){console.error("Error updating profile picture:",g),T.error("Failed to update profile picture")}},y=()=>{u(""),f(!0),T.info("Profile picture removed! Don't forget to save your changes.")},F=n=>{switch(n){case"super_admin":return"bg-destructive text-destructive-foreground border-0";case"manager":return"bg-primary text-primary-foreground border-0";default:return"bg-success text-success-foreground border-0"}},_=["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose","Remote","Other"];return a?e.jsxs("div",{className:"space-y-8 ",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-muted/30 rounded-2xl -z-10"}),e.jsx("div",{className:"p-8 space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center shadow-lg ",children:e.jsx(Q,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-success rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-primary-subtle",children:"My Profile"}),e.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Manage your personal information and account settings"})]})]})})]}),e.jsxs(Ie,{defaultValue:"profile",className:"space-y-6",children:[e.jsxs(Ee,{children:[e.jsx(q,{value:"profile",children:"Profile Information"}),e.jsx(q,{value:"security",children:"Security Settings"}),e.jsx(q,{value:"preferences",children:"Preferences"}),e.jsx(q,{value:"activity",children:"Activity"})]}),e.jsxs(z,{value:"profile",className:"space-y-6",children:[e.jsxs(w,{className:"border shadow-sm bg-card",children:[e.jsxs(b,{className:"pb-4",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),"Profile Overview"]}),e.jsx(k,{children:"Your current profile information and picture"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Pe,{className:"h-28 w-28 ring-4 ring-primary/20 shadow-lg",children:[e.jsx(_e,{src:l?Ae.getOptimizedImageUrl(l,{width:200,height:200,quality:90}):void 0}),e.jsx(Me,{className:"text-2xl bg-primary text-primary-foreground font-bold",children:a.full_name.split(" ").map(n=>n[0]).join("")})]}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-primary rounded-full p-2 shadow-lg",children:e.jsx(Ve,{className:"h-4 w-4 text-primary-foreground"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:a.full_name}),e.jsx("p",{className:"text-lg text-muted-foreground",children:a.job_title})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:F(a.role),children:a.role.replace("_"," ").toUpperCase()}),e.jsx(O,{variant:"outline",className:"border-muted-foreground/30",children:a.department})]})]})]})})]}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Contact Information"}),e.jsx(k,{children:"Your contact details and work information"})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.location})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Department"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.department})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Job Title"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.job_title})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Joining Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:V(new Date(a.joining_date),"MMMM dd, yyyy")})]})]})]})]})})]}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Profile Picture"}),e.jsx(k,{children:"Upload or update your profile picture"})]}),e.jsx(C,{children:e.jsx(De,{onImageUploaded:d,onImageRemoved:y,currentImages:l?[l]:[],maxImages:1,bucket:"profiles",userId:a.id})})]}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Edit Profile"}),e.jsx(k,{children:"Update your personal information"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"full_name",children:"Full Name"}),e.jsx(D,{id:"full_name",value:s.full_name,onChange:n=>r("full_name",n.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"phone",children:"Phone Number"}),e.jsx(D,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",value:s.phone,onChange:n=>r("phone",n.target.value)})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"job_title",children:"Job Title"}),e.jsx(D,{id:"job_title",value:s.job_title,onChange:n=>r("job_title",n.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"location",children:"Location"}),e.jsxs(E,{value:s.location,onValueChange:n=>r("location",n),children:[e.jsx(U,{children:e.jsx(R,{})}),e.jsx(L,{children:_.map(n=>e.jsx(v,{value:n,children:n},n))})]})]})]}),e.jsx(re,{children:e.jsxs(ie,{children:[e.jsx("strong",{children:"Note:"})," Some fields like email, department, and role can only be changed by administrators."]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{type:"submit",disabled:h||!o,className:`transition-all duration-200 ${o?"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg":"bg-muted text-muted-foreground cursor-not-allowed"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),o?"Save Changes":"No Changes"]})}),o&&e.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:"You have unsaved changes"})]})]})})]})]}),e.jsxs(z,{value:"security",className:"space-y-6",children:[e.jsx($e,{}),e.jsxs(w,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Account Information"}),e.jsx(k,{children:"Your account details and security information"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Account Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.email})]}),e.jsx(O,{variant:"outline",className:"bg-green-100 text-green-800",children:"Verified"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Account Created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.created_at?V(new Date(t.created_at),"MMMM dd, yyyy"):"Unknown"})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Last Sign In"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.last_sign_in_at?V(new Date(t.last_sign_in_at),"MMMM dd, yyyy at h:mm a"):"Unknown"})]})})]})})]})]}),e.jsx(z,{value:"preferences",className:"space-y-6",children:e.jsx(ss,{})}),e.jsx(z,{value:"activity",className:"space-y-6",children:e.jsx(as,{})})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Unable to load your profile information."})]})})}export{fs as Profile};
